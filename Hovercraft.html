<!DOCTYPE html>
<html>
	
	<body>

	<h1>This is a Gyro Test</h1>
	<button onclick="onClick()"> Click Me to Test</button>
	<div>Rotation alpha:<p id="alpha"></p></div>
	<div>Rotation beta:<p id="beta"></p></div>
	<div>Rotation gamma:<p id="gamma"></p></div>

	</body>
	
	<script>
		var disp_alpha = document.getElementById("alpha");
		var disp_beta = document.getElementById("beta");
		var disp_gamma = document.getElementById("gamma");
		
		//force it to be secure connection
		if(window.location.href.split(":")[0] != "https"){
		    window.location.href = window.location.href.replace("http", "https");
		}
		
		function onClick() {
			// feature detect
			if (typeof DeviceOrientationEvent.requestPermission === 'function') {
				DeviceOrientationEvent.requestPermission()
				.then(permissionState => {
					if (permissionState === 'granted') {
						window.addEventListener('deviceorientation', (event) => {
							disp_alpha = event.alpha;
							disp_beta = event.beta;
							disp_gamma = event.gamma;
						});
					}
				})
				.catch(console.error);
			} else {
				alert("You cannot access the orientation");
			}
		}
	</script>
	
</html>
